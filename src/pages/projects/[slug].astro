---
import Layout from "../../layouts/Layout.astro";
import { marked } from "../../lib/marked";
import { parseBlocks } from "../../lib/notion-parse";
import { getProjectPaths } from "../../lib/notion-cms";

export async function getStaticPaths() {
  const paths = await getProjectPaths();

  return paths.map(({ params, props }) => ({
    params,
    props: {
      title: props.title,
      post: marked.parse(parseBlocks(props.post)),
    },
  }));
}

const { post, title } = Astro.props;
---

<Layout title={title}>
  <div class="prose w-full max-w-full">
    <Fragment set:html={post} />
  </div>
</Layout>
