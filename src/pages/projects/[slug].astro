---
import Layout from "../../layouts/Layout.astro";
import { marked } from "../../lib/marked";
import { parseBlocks } from "../../lib/notion-parse";
import { getProjectPaths } from "../../lib/notion-cms";

export async function getStaticPaths() {
  const paths = await getProjectPaths();

  return paths.map(({ params, props }) => ({
    params,
    props: {
      post: marked.parse(parseBlocks(props.post)),
      properties: props.properties,
    },
  }));
}

const { post, properties } = Astro.props;
---

<Layout {...properties} className="prose mx-auto break-words">
  <Fragment set:html={post} />
</Layout>
