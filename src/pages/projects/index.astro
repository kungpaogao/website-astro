---
import { asyncIterableToArray } from "@jitl/notion-api";
import { Projects } from "../../lib/notion-cms";
import { richTextAsPlainText } from "@jitl/notion-api";
import Layout from "../../layouts/Layout.astro";

const projects = await asyncIterableToArray(
  Projects.query({
    sorts: [Projects.sort.published.descending],
  })
);
---

<Layout title="Projects | Andrew Gao">
  <h1 class="text-2xl">Projects</h1>
  <div class="flex flex-col gap-3 items-start mt-3">
    {projects.map((project) => (
      <div>
        <a class="underline" href={project.frontmatter.httpRoute}>
          <h2>{richTextAsPlainText(project.frontmatter.title)}</h2>
        </a>
      </div>
    ))}
  </div>
</Layout>
